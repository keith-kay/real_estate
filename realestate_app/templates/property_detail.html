{% extends 'base.html' %}
{% load custom_filters %}
{% load static %}

{% block content %}

<div class="container-xxl py-3">
    <div class="container">
        {% if property.image_set.all %}
            {% with first_image=property.image_set.first %}
        <div class="row g-5 align-items-center">
          <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
            <h2 class="mb-3">{{ property.title }}</h2>
            {% if property.price %}
                <h5 class="text-primary">{{ property.price }}</h5>
            {% endif %}
            <div class="pb-3 pe-0">
                <img class="img-fluid shadow-example" src="{{ first_image.image.url }}" alt="{{ property.title }}" style="height: 450px; width: 100%; object-fit: cover; border-radius: 4px;">
            </div>
        </div>
        <div class="col-lg-6 wow fadeIn" data-wow-delay="0.5s" id="description-container">
            <div class="" style="margin-left:20px;">
                <h4 class="text-primary">Description</h4>
                <p class="" style="margin-left: 0 !important; letter-spacing: 1px; font-size: 17px">{{ property.description|linebreaks }}</p>
            </div>   
        </div>
        </div>
            {% endwith %}
        {% endif %}
    </div>
</div>

<!-- Search Start -->
<div class="container-xxl py-5">
  <div class="container">
      <div class="owl-carousel testimonial-carousel wow fadeInUp" data-wow-delay="0.1s">
        {% for property_image in property_images %}
          {% if property_image.title != 'Site Map' and property_image.title != 'overview' and property_image.title != '1stflr' and property_image.title != '2ndflr' and property_image.title != '3rdflr' %}
            <div class="testimonial-item bg-light rounded p-3">
              <div class="bg-white border rounded p-4">
                  <div class="d-flex align-items-center">
                    <img src="{{ property_image.image.url }}" class="d-block w-100" alt="{{ property.title }} - Image {{ forloop.counter }}" style="height:300px; 300px;">
                  </div>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
  </div>
</div> 
<!-- Search End -->
<style>
  .csslider {
    -moz-perspective: 1300px;
    -ms-perspective: 1300px;
    -webkit-perspective: 1300px;
    perspective: 1300px;
    display: inline-block;
    text-align: left;
    position: relative;
    margin-bottom: 22px;
  }
  .csslider > input {
    display: none;
  }
  .csslider > input:nth-of-type(10):checked ~ ul li:first-of-type {
    margin-left: -900%;
  }
  .csslider > input:nth-of-type(9):checked ~ ul li:first-of-type {
    margin-left: -800%;
  }
  .csslider > input:nth-of-type(8):checked ~ ul li:first-of-type {
    margin-left: -700%;
  }
  .csslider > input:nth-of-type(7):checked ~ ul li:first-of-type {
    margin-left: -600%;
  }
  .csslider > input:nth-of-type(6):checked ~ ul li:first-of-type {
    margin-left: -500%;
  }
  .csslider > input:nth-of-type(5):checked ~ ul li:first-of-type {
    margin-left: -400%;
  }
  .csslider > input:nth-of-type(4):checked ~ ul li:first-of-type {
    margin-left: -300%;
  }
  .csslider > input:nth-of-type(3):checked ~ ul li:first-of-type {
    margin-left: -200%;
  }
  .csslider > input:nth-of-type(2):checked ~ ul li:first-of-type {
    margin-left: -100%;
  }
  .csslider > input:nth-of-type(1):checked ~ ul li:first-of-type {
    margin-left: 0%;
  }
  .csslider > ul {
    position: relative;
    width: 820px;
    height: 420px;
    z-index: 1;
    font-size: 0;
    line-height: 0;
    border: 10px solid #ffffff;
    margin: 0 auto;
    padding: 0;
    overflow: hidden;
    white-space: nowrap;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
  }
  .csslider > ul > li {
    position: relative;
    display: inline-block;
    width: 100%;
    height: 100%;
    overflow: hidden;
    font-size: 15px;
    font-size: initial;
    line-height: normal;
    -moz-transition: all 0.5s cubic-bezier(0.4, 1.3, 0.65, 1);
    -o-transition: all 0.5s ease-out;
    -webkit-transition: all 0.5s cubic-bezier(0.4, 1.3, 0.65, 1);
    transition: all 0.5s cubic-bezier(0.4, 1.3, 0.65, 1);
    vertical-align: top;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    white-space: normal;
  }
  .csslider > .navigation {
    position: absolute;
    bottom: -8px;
    left: 50%;
    z-index: 10;
    margin-bottom: -10px;
    font-size: 0;
    line-height: 0;
    text-align: center;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  .csslider > .navigation > div {
      margin-left: -100%;
  }
  .csslider > .navigation label {
    position: relative;
    display: inline-block;
    cursor: pointer;
    border-radius: 50%;
    margin: 0 4px;
    padding: 4px;
    background: #3A3A3A;
  }
  .csslider > .navigation label:hover:after {
    opacity: 1;
  }
  .csslider > .navigation label:after {
    content: '';
    position: absolute;
    left: 50%;
    top: 50%;
    margin-left: -6px;
    margin-top: -6px;
    background: #ff0000;
    border-radius: 50%;
    padding: 6px;
    opacity: 0;
  }
  .csslider > .arrows {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  .csslider.inside .navigation {
    bottom: 10px;
    margin-bottom: 10px;
  }
  .csslider > input:nth-of-type(1):checked ~ .navigation label:nth-of-type(1):after,
  .csslider > input:nth-of-type(2):checked ~ .navigation label:nth-of-type(2):after,
  .csslider > input:nth-of-type(3):checked ~ .navigation label:nth-of-type(3):after,
  .csslider > input:nth-of-type(4):checked ~ .navigation label:nth-of-type(4):after,
  .csslider > input:nth-of-type(5):checked ~ .navigation label:nth-of-type(5):after,
  .csslider > input:nth-of-type(6):checked ~ .navigation label:nth-of-type(6):after,
  .csslider > input:nth-of-type(7):checked ~ .navigation label:nth-of-type(7):after,
  .csslider > input:nth-of-type(8):checked ~ .navigation label:nth-of-type(8):after,
  .csslider > input:nth-of-type(9):checked ~ .navigation label:nth-of-type(9):after,
  .csslider > input:nth-of-type(10):checked ~ .navigation label:nth-of-type(10):after,
  .csslider > input:nth-of-type(11):checked ~ .navigation label:nth-of-type(11):after {
    opacity: 1;
  }
  .csslider > .arrows {
    position: absolute;
    left: -31px;
    top: 50%;
    width: 100%;
    height: 26px;
    padding: 0 31px;
    z-index: 0;
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box;
    box-sizing: content-box;
  }
  .csslider > .arrows label {
    display: none;
    position: absolute;
    top: -50%;
    padding: 13px;
    box-shadow: inset 2px -2px 0 1px #3A3A3A;
    cursor: pointer;
    -moz-transition: box-shadow 0.15s, margin 0.15s;
    -o-transition: box-shadow 0.15s, margin 0.15s;
    -webkit-transition: box-shadow 0.15s, margin 0.15s;
    transition: box-shadow 0.15s, margin 0.15s;
  }
  .csslider > .arrows label:hover {
    box-shadow: inset 3px -3px 0 2px #ff0000;
    margin: 0 0px;
  }
  .csslider > .arrows label:before {
    content: '';
    position: absolute;
    top: -100%;
    left: -100%;
    height: 300%;
    width: 300%;
  }
  .csslider.infinity > input:first-of-type:checked ~ .arrows label.goto-last,
  .csslider > input:nth-of-type(1):checked ~ .arrows > label:nth-of-type(0),
  .csslider > input:nth-of-type(2):checked ~ .arrows > label:nth-of-type(1),
  .csslider > input:nth-of-type(3):checked ~ .arrows > label:nth-of-type(2),
  .csslider > input:nth-of-type(4):checked ~ .arrows > label:nth-of-type(3),
  .csslider > input:nth-of-type(5):checked ~ .arrows > label:nth-of-type(4),
  .csslider > input:nth-of-type(6):checked ~ .arrows > label:nth-of-type(5),
  .csslider > input:nth-of-type(7):checked ~ .arrows > label:nth-of-type(6),
  .csslider > input:nth-of-type(8):checked ~ .arrows > label:nth-of-type(7),
  .csslider > input:nth-of-type(9):checked ~ .arrows > label:nth-of-type(8),
  .csslider > input:nth-of-type(10):checked ~ .arrows > label:nth-of-type(9),
  .csslider > input:nth-of-type(11):checked ~ .arrows > label:nth-of-type(10) {
    display: block;
    left: 0;
    right: auto;
    -moz-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    -o-transform: rotate(45deg);
    -webkit-transform: rotate(45deg);
    transform: rotate(45deg);
  }
  .csslider.infinity > input:last-of-type:checked ~ .arrows label.goto-first,
  .csslider > input:nth-of-type(1):checked ~ .arrows > label:nth-of-type(2),
  .csslider > input:nth-of-type(2):checked ~ .arrows > label:nth-of-type(3),
  .csslider > input:nth-of-type(3):checked ~ .arrows > label:nth-of-type(4),
  .csslider > input:nth-of-type(4):checked ~ .arrows > label:nth-of-type(5),
  .csslider > input:nth-of-type(5):checked ~ .arrows > label:nth-of-type(6),
  .csslider > input:nth-of-type(6):checked ~ .arrows > label:nth-of-type(7),
  .csslider > input:nth-of-type(7):checked ~ .arrows > label:nth-of-type(8),
  .csslider > input:nth-of-type(8):checked ~ .arrows > label:nth-of-type(9),
  .csslider > input:nth-of-type(9):checked ~ .arrows > label:nth-of-type(10),
  .csslider > input:nth-of-type(10):checked ~ .arrows > label:nth-of-type(11),
  .csslider > input:nth-of-type(11):checked ~ .arrows > label:nth-of-type(12) {
    display: block;
    right: 0;
    left: auto;
    -moz-transform: rotate(225deg);
    -ms-transform: rotate(225deg);
    -o-transform: rotate(225deg);
    -webkit-transform: rotate(225deg);
    transform: rotate(225deg);
  }
/*#region MODULES */
/*#endregion */
/*___________________________________ LAYOUT ___________________________________ */
  * {
    margin: 0;
    padding: 0;
  }
  ul {
    padding-left: 40px;
  }

    #slider1 {
    margin: 20px;
    font-family: 'Lato';
  }
  #slider1 > input:nth-of-type(3):checked ~ ul #bg {
    width: 80%;
    padding: 22px;
    -moz-transition: .5s .5s;
    -o-transition: .5s .5s;
    -webkit-transition: .5s .5s;
    transition: .5s .5s;
  }
  #slider1 > input:nth-of-type(3):checked ~ ul #bg div {
    -moz-transform: translate(0);
    -ms-transform: translate(0);
    -o-transform: translate(0);
    -webkit-transform: translate(0);
    transform: translate(0);
    -moz-transition: .5s .9s;
    -o-transition: .5s .9s;
    -webkit-transition: .5s .9s;
    transition: .5s .9s;
  }
/*#videos */
/*___________________________________ LAYOUT ___________________________________ */
  video { 
    width:710px; 
    height:400px;  
    background:transparent url('') no-repeat 0 0; 
    -webkit-background-size:cover; 
    -moz-background-size:cover; 
    -o-background-size:cover; 
    background-size:cover; 
  }
  p {
    margin-left:3em;
  }
</style>
<div style="height: 100%; overflow-x: hidden; text-align: center">
  {% for property.video in property.videos %}
    <div class="csslider infinity" id="slider1">
      {% for i in property.videos %}
        <input type="radio" name="slides" {% if forloop.first %}checked="checked" {% endif %} id="slides_{{ forloop.counter }}"/>
      {% endfor %}
      <ul>
        <li>
          <p style="font-weight:bold; font-size:48px">
            This is a pure CSS video slider, forked from <a href="https://codepen.io/drygiel" style="color:orange">Damian Drygiel</a>'s <a href="https://codepen.io/drygiel/pen/rtpnE" style="color:cyan">Pure CSS slider</a>. Although due to using YouTube embed codes, it's technically not pure CSS as YouTube uses JavaScript. 
          </p>
        </li>
        <li>
          <p>
            <iframe width="710px" height="400px" src="{{ property_video.video.url }}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
          </p>
        </li>
      </ul>
      <div class="arrows">
        {% for i in property.videos %}
          <label for="slides_{{ forloop.counter }}"></label>
        {% endfor %}
        <label class="goto-first" for="slides_1"></label>
        <label class="goto-last" for="slides_{{ property.videos|length }}"></label>
      </div>
      <div class="navigation"> 
        <div>
          {% for i in property.videos %}
            <label for="slides_{{ forloop.counter }}"></label>
          {% endfor %}
        </div>
      </div>
    </div>
  {% endfor %}
</div>

<div class="container-xxl py-3">
    <div class="container">
        <div class="row g-5 align-items-center">
            <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
                <h3 class="mb-4 my-5 ">Amenities</h3>
                <div class="pb-3 pe-0" style="font-size: 17px;" >
                    <ul >
                        {% if property.amenities %}
                            {% for amenity in property.amenities|split_lines %}
                                <li>{{ amenity }}</li>
                                {% if forloop.counter|divisibleby:4 and not forloop.last %}
                                    </ul><ul>
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            <li>No amenities specified</li>
                        {% endif %}
                    </ul>
                </div>
            </div>
            <div class="col-lg-6 wow fadeIn" data-wow-delay="0.5s" >
                <style>
                    /* Custom style for white background */
                    .custom-accordion-item {
                      background-color: white;
                    }
                  </style>
                  
                  {% if site_map_images.exists %}
                  <h3 class="mb-4 my-5 ">Site Plan</h3>
                    <div class="accordion" id="accordionExample">
                        <div class="accordion-item custom-accordion-item">
                          <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button collapsed custom-accordion-item" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                              Site Plan
                            </button>
                          </h2>
                          <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                              {% for site_map_image in site_map_images %}
                                  <img class="img-fluid" src="{{ site_map_image.image.url }}" alt="{{ property.title }} - Site Map">
                              {% endfor %}
                            </div>
                          </div>
                        </div>
                      {% endif %}

                      {% if aerial_view_images.exists %}
                         <div class="accordion-item custom-accordion-item">
                          <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed custom-accordion-item" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                              Ariel View
                            </button>
                          </h2>
                          <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                              {% for aerial_view_image in aerial_view_images %}
                                  <img class="img-fluid" src="{{ aerial_view_image.image.url }}" alt="{{ property.title }} - Site Map">
                              {% endfor %}
                            </div>
                          </div>
                        </div> 
                      {% endif %}
                      {% if first_floors.exists %}
                         <div class="accordion-item custom-accordion-item">
                          <h2 class="accordion-header" id="headingThree">
                            <button class="accordion-button collapsed custom-accordion-item" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                              1st Floor
                            </button>
                          </h2>
                          <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                              {% for first_floor in first_floors %}
                                  <img class="img-fluid" src="{{ first_floor.image.url }}" alt="{{ property.title }} - Site Map">
                              {% endfor %}
                            </div>
                          </div>
                        </div> 
                      {% endif %}
                      {% if second_floors.exists %}
                         <div class="accordion-item custom-accordion-item">
                          <h2 class="accordion-header" id="headingFour">
                            <button class="accordion-button collapsed custom-accordion-item" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                              2nd Floor
                            </button>
                          </h2>
                          <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                              {% for second_floor in second_floors %}
                                  <img class="img-fluid" src="{{ second_floor.image.url }}" alt="{{ property.title }} - Site Map">
                              {% endfor %}
                            </div>
                          </div>
                        </div> 
                      {% endif %}
                      {% if third_floors.exists %}
                         <div class="accordion-item custom-accordion-item">
                          <h2 class="accordion-header" id="headingFive">
                            <button class="accordion-button collapsed custom-accordion-item" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                              3rd Floor
                            </button>
                          </h2>
                          <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                              {% for third_floor in third_floors %}
                                  <img class="img-fluid" src="{{ third_floor.image.url }}" alt="{{ property.title }} - Site Map">
                              {% endfor %}
                            </div>
                          </div>
                        </div> 
                      {% endif %}
                      {% if fourth_floors.exists %}
                         <div class="accordion-item custom-accordion-item">
                          <h2 class="accordion-header" id="headingSix">
                            <button class="accordion-button collapsed custom-accordion-item" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
                              4th Floor
                            </button>
                          </h2>
                          <div id="collapseSix" class="accordion-collapse collapse" aria-labelledby="headingSix" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                              {% for fourth_floor in fourth_floors %}
                                  <img class="img-fluid" src="{{ fourth_floor.image.url }}" alt="{{ property.title }} - Site Map">
                              {% endfor %}
                            </div>
                          </div>
                        </div> 
                      {% endif %}
                      {% if fifth_floors.exists %}
                         <div class="accordion-item custom-accordion-item">
                          <h2 class="accordion-header" id="headingSeven">
                            <button class="accordion-button collapsed custom-accordion-item" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
                              5th Floor
                            </button>
                          </h2>
                          <div id="collapseSeven" class="accordion-collapse collapse" aria-labelledby="headingSeven" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                              {% for fifth_floor in fifth_floors %}
                                  <img class="img-fluid" src="{{ fifth_floor.image.url }}" alt="{{ property.title }} - Site Map">
                              {% endfor %}
                            </div>
                          </div>
                        </div> 
                      {% endif %}
                      {% if not property.coordinates %}
                         <div class="accordion-item custom-accordion-item">
                          <h2 class="accordion-header" id="headingFive">
                            <button class="accordion-button collapsed custom-accordion-item" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                              Location
                            </button>
                          </h2>
                          <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                              {{ property.coordinates | safe }}
                            </div>
                          </div>
                        </div> 
                      {% endif %}
                      </div> 
                    </div>
            </div>
    
        </div> 
</div>
<div class="container-xxl py-3">
  <div class="container">
    <div class="row g-5 align-items-center">
      <div class="col-lg-5 wow fadeIn" data-wow-delay="0.1s">
          {% if property.nearby != 'N/A' %}
              <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
                <h4 class="mb-4 my-5 " style="white-space: nowrap;">Nearby Places</h4>
                <table class="table table-striped"style="width: 400px;">
                  <thead>
                    <th style="background: #0e2e50; color: #fff"> Nearby Places & Attractions</th>
                  </thead>
                  <tbody>
                    {% for line in property.nearby|split_lines %}
                      <tr>
                        <td>{{ line }}</td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
          {% endif %}
      </div>
      <div class="col-lg-3 wow fadeIn" data-wow-delay="0.1s">
            <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
              <h4 class="mb-4 my-5 mx-3">Size</h4>
              {% if property.size%}
              {% for size in property.size|split_lines %}
              <ul style="white-space: nowrap;">
                <li> {{size}}</li>
              </ul>
              {% endfor %}
              {% endif %}
            </div>
      </div>
      <div class="col-lg-3 wow fadeIn" data-wow-delay="0.1s">
        {% if property.price or property.payment_plan %}
            <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
              {% if property.price_details != 'empty' or property.payment_plan != 'N/A' %}
                    <h4 class="mb-4 my-5">Price</h4>
              {% if property.price_details != 'empty' %}
                      
                      <p class="" style="margin-left:0; white-space: nowrap; font-size:17px">{{ property.price_details|linebreaksbr }}</p>
                  {% endif %}
                  {% if property.payment_plan != 'N/A' %}
                      <p class="" style="margin-left:0; white-space: nowrap; font-size:17px">{{ property.payment_plan|linebreaksbr }}</p>
                  {% endif %}
              {% endif %}
            </div>
        {% endif %}
      </div>
      <div class="container">
        <button class="btn btn-primary py-3 px-4 mx-4" style="display: inline-block;"><i class="fas fa-phone" style="font-size:25px;"></i></button>
        <div style="display: inline-block; vertical-align: top;">
            <p class=" fw-bold" style="font-size:23px; color:#0E2E50; margin-left:0"> Contact Our Sales Team </p>
            <p style="font-size:18px;margin-left:0"> +254 796 212 013 </p>
        </div>
    </div>
    </div>
  </div>
 
</div>  
<script>
  document.addEventListener("DOMContentLoaded", function() {
    var titleHeight = document.querySelector(".col-lg-6 h2").offsetHeight;
    var descriptionContainer = document.getElementById("description-container");
    descriptionContainer.style.marginTop = (titleHeight + 20) + "px";
});
</script>
{% endblock %}