{% extends 'base.html' %}
{% load custom_filters %}
{% load static %}

{% block content %}

<div class="container-xxl py-3">
    <div class="container">
        {% if property.image_set.all %}
            {% with first_image=property.image_set.first %}
        <div class="row g-5 align-items-center">
            <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
                <h2 class="mb-4 my-5 ">{{property.title}}</h2>
                <div class="pb-3 pe-0" >
                    <img class="img-fluid shadow-example" src="{{ first_image.image.url }}" alt="{{ property.title }}" style="height: 450px; width: 100%; object-fit: cover; border-radius: 4px;">
                </div>
            </div>
            <div class="col-lg-6 wow fadeIn" data-wow-delay="0.5s" >
                <div class="" style="margin-top:120px; margin-left:20px;">
                    <h4 class=" text-primary">Description</h4>
                    <p class="" style="letter-spacing:1px; font-size:17px">{{ property.description|linebreaks }}</p>
                </div>   
            </div>
        </div>
    </div>
</div>

<!-- Search Start -->
<style>
  .multi-item-carousel .carousel-inner > .item {
    transition: 500ms ease-in-out left;
  }

  .multi-item-carousel .carousel-inner > .item.active.left {
    left: -33%;
  }

  .multi-item-carousel .carousel-inner > .item.active.right {
    left: 33%;
  }

  .multi-item-carousel .carousel-inner > .item.next {
    left: 33%;
  }

  .multi-item-carousel .carousel-inner > .item.prev {
    left: -33%;
  }

  @media all and (transform-3d), (-webkit-transform-3d) {
    .multi-item-carousel .carousel-inner > .item {
      transition: 500ms ease-in-out left, 500ms ease-in-out all;
      backface-visibility: visible;
      transform: none!important;
    }
  }

  .multi-item-carousel .carousel-control.left,
  .multi-item-carousel .carousel-control.right {
    background-image: none;
  }
</style>
 <div class="container-fluid bg-primary wow fadeIn" data-wow-delay="0.1s" style="padding: 35px; border-radius:5px;">
    <div class="container">
        <div class="row g-2">
          <div class="carousel slide multi-item-carousel" id="theCarousel">
            <div class="carousel-inner">
              <div class="item active">
                <div class="col-xs-4"><a href="#1"><img src="https://source.unsplash.com/300x300/?perth,australia" class="img-responsive"></a></div>
              </div>
              <div class="item">
                <div class="col-xs-4"><a href="#1"><img src="https://source.unsplash.com/300x300/?fremantle,australia" class="img-responsive"></a></div>
              </div>
              <div class="item">
                <div class="col-xs-4"><a href="#1"><img src="https://source.unsplash.com/300x300/?west-australia" class="img-responsive"></a></div>
              </div>
              <div class="item">
                <div class="col-xs-4"><a href="#1"><img src="https://source.unsplash.com/300x300/?perth" class="img-responsive"></a></div>
              </div>
              <div class="item">
                <div class="col-xs-4"><a href="#1"><img src="https://source.unsplash.com/300x300/?quokka,perth" class="img-responsive"></a></div>
              </div>
              <div class="item">
                <div class="col-xs-4"><a href="#1"><img src="https://source.unsplash.com/300x300/?margaretriver,australia" class="img-responsive"></a></div>
              </div>
              <!-- add  more items here -->
              <!-- Example item start:  -->
              
              <div class="item">
                <div class="col-xs-4"><a href="#1"><img src="https://source.unsplash.com/300x300/?perth,australia&r=7" class="img-responsive"></a></div>
              </div>
              
              <!--  Example item end -->
            </div>
            <a class="left carousel-control" href="#theCarousel" data-slide="prev"><i class="glyphicon glyphicon-chevron-left"></i></a>
            <a class="right carousel-control" href="#theCarousel" data-slide="next"><i class="glyphicon glyphicon-chevron-right"></i></a>
          </div>
        </div> 
    </div>
</div> 
<script>
  // Instantiate the Bootstrap carousel
$('.multi-item-carousel').carousel({
  interval: false
});

// for every slide in carousel, copy the next slide's item in the slide.
// Do the same for the next, next item.
$('.multi-item-carousel .item').each(function(){
  var next = $(this).next();
  if (!next.length) {
    next = $(this).siblings(':first');
  }
  next.children(':first-child').clone().appendTo($(this));
  
  if (next.next().length>0) {
    next.next().children(':first-child').clone().appendTo($(this));
  } else {
  	$(this).siblings(':first').children(':first-child').clone().appendTo($(this));
  }
});
</script>
<!-- Search End -->

<div class="container-xxl py-3">
    <div class="container">
        <div class="row g-5 align-items-center">
            <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
                <h3 class="mb-4 my-5 ">Amenities</h3>
                <div class="pb-3 pe-0" style="font-size: 17px;" >
                    <ul >
                        {% if property.amenities %}
                            {% for amenity in property.amenities|split_lines %}
                                <li>{{ amenity }}</li>
                                {% if forloop.counter|divisibleby:4 and not forloop.last %}
                                    </ul><ul>
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            <li>No amenities specified</li>
                        {% endif %}
                    </ul>
                </div>
            </div>
            <div class="col-lg-6 wow fadeIn" data-wow-delay="0.5s" >
                <style>
                    /* Custom style for white background */
                    .custom-accordion-item {
                      background-color: white;
                    }
                  </style>
                  <h3 class="mb-4 my-5 ">Site Plan</h3>
                  {% if site_map_images.exists %}
                    <div class="accordion" id="accordionExample">
                        <div class="accordion-item custom-accordion-item">
                          <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button collapsed custom-accordion-item" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                              Site Plan
                            </button>
                          </h2>
                          <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                              {% for site_map_image in site_map_images %}
                                  <img class="img-fluid" src="{{ site_map_image.image.url }}" alt="{{ property.title }} - Site Map">
                              {% endfor %}
                            </div>
                          </div>
                        </div>
                      {% endif %}

                      {% if aerial_view_images.exists %}
                         <div class="accordion-item custom-accordion-item">
                          <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed custom-accordion-item" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                              Ariel View
                            </button>
                          </h2>
                          <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                              {% for aerial_view_image in aerial_view_images %}
                                  <img class="img-fluid" src="{{ aerial_view_image.image.url }}" alt="{{ property.title }} - Site Map">
                              {% endfor %}
                            </div>
                          </div>
                        </div> 
                      {% endif %}
                      </div> 
                    </div>
        </div>
    </div>
</div>

{% endwith %}
{% endif %}
{% endblock %}